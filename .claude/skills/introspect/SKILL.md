---
name: introspect
description: Meta-improvement analysis across introspection hierarchy levels
version: 1.0.0
---

# /introspect - Meta-Improvement Analysis

Synthesize higher-order insights by analyzing L(N-1) introspection documents to produce L(N) meta-analyses. Each level adds observational power that the level below cannot achieve individually.

---

## Invocation

| Pattern | Behavior |
|---------|----------|
| `/introspect 3` | Reads all L2 summaries, produces L3 meta-analysis |
| `/introspect 4` | Reads all L3 meta-summaries, produces L4 meta-analysis |
| `/introspect N` | Reads all L(N-1) documents, produces L(N) document (N >= 3) |

**Required argument:** N >= 3. Lower levels are generated by other skills (L1 by `/update-and-archive`, L2 by `/self-improve`).

### Input/Output Mapping

| Level | Input Source | Output Path |
|-------|-------------|-------------|
| 3 | `dev/storage/archive/summaries/*.md` | `dev/storage/archive/meta-summaries/L3-<entry-id>.md` |
| 4+ | `dev/storage/archive/meta-summaries/L<N-1>-*.md` | `dev/storage/archive/meta-summaries/L<N>-<entry-id>.md` |

**Minimum viable input:** 2+ L(N-1) documents required. Fewer triggers graceful failure.

---

## Mandatory Archive Protocol

**This is not optional. Violations break the skill contract.**

### First Action on Invocation

Before doing ANYTHING else:

1. Call `sbs_archive_state()` via MCP
2. Check `global_state` field:
   - `null` -> Fresh run, proceed to ingestion
   - `{skill: "introspect", substate: X}` -> Resume from substate X
   - `{skill: "other", ...}` -> Error: state conflict, do NOT proceed

### Phase Transitions

Every phase change MUST use MCP skill lifecycle tools:

```
sbs_skill_start(skill="introspect", initial_substate="ingestion")
sbs_skill_transition(skill="introspect", to_phase="synthesis")
sbs_skill_transition(skill="introspect", to_phase="archive")
sbs_skill_end(skill="introspect")
```

Phases: `ingestion` -> `synthesis` -> `archive`

### Ending the Skill

```
sbs_skill_end(skill="introspect")
```

This sets `global_state` to `null`, returning system to idle.

---

## Agent Concurrency

None. `/introspect` is a sequential read-synthesize-write operation. No subagent spawning.

---

## Phase 1: Ingestion

**Purpose:** Collect and parse all L(N-1) documents.

### Entry

```
sbs_skill_start(skill="introspect", initial_substate="ingestion")
```

### Actions

1. Parse N from invocation argument. Reject if N < 3.
2. Glob for L(N-1) documents:
   - **N=3:** `dev/storage/archive/summaries/*.md` (all L2 summaries, excluding `.gitkeep`)
   - **N=4+:** `dev/storage/archive/meta-summaries/L<N-1>-*.md`
3. Count documents. If < 2, fail gracefully (see Error Handling).
4. Read every document.
5. Extract structural elements from each:
   - Dates and cycle identifiers
   - Findings logged (issue numbers, titles)
   - Cross-session patterns identified
   - Per-pillar synthesis content
   - Behavioral observations
   - Recommendations made
   - Metric values (quality scores, completion rates, etc.)
6. Build a chronological timeline of the L(N-1) series.

### Output

Structured inventory of all L(N-1) content, organized chronologically.

---

## Phase 2: Synthesis

**Purpose:** Answer questions that L(N-1) documents cannot answer individually.

### Entry

```
sbs_skill_transition(skill="introspect", to_phase="synthesis")
```

### Required Analysis Dimensions

1. **Skill Evolution Trajectory**
   How has the improvement system itself changed across cycles? Track: finding categories, finding depth, closure rates, verification gaps. Identify whether the system is getting better at finding problems, or just finding different ones.

2. **Recurring Friction Inventory**
   Problems appearing in 3+ L(N-1) documents despite being "addressed." What persistence reveals about intervention strategies. Distinguish between: genuinely hard problems, insufficiently scoped fixes, and fixes that were never verified.

3. **Metric Trajectory Analysis**
   Track quantitative metrics across all L(N-1) documents. Identify plateaus, improvements, regressions, and stuck areas. Present as tables with directional indicators.

4. **Intervention Effectiveness**
   Classify past interventions by type (guidance addition, code fix, architectural redirect, investigation). Compute resolution rate per type. Identify which intervention types produce verifiable results vs. which produce only stated intentions.

5. **Observation Layer Meta-Assessment**
   Is the improvement system observing the right things? Assess: coverage gaps (what isn't being measured), false confidence (metrics that look good but miss reality), signal-to-noise (are findings getting more actionable over time).

6. **Data Speaks**
   Raw aggregated tables from all L(N-1) documents without commentary. Issue counts, pillar distributions, finding categories, metric values. Let the data surface patterns that narrative analysis might miss.

7. **Recommendations for Next Cycle**
   Concrete focus areas for the next L(N) analysis. What data should be collected, what questions remain open, what hypotheses deserve testing.

### Output Structure

```markdown
# Meta-Improvement Analysis: L<N>-<entry-id>

**Level:** <N>
**Date:** <date>
**L(N-1) Documents Analyzed:** <count> (<list of IDs>)
**Date Range:** <first date> to <last date>

---

## 1. Skill Evolution Trajectory
## 2. Recurring Friction Inventory
## 3. Metric Trajectory Analysis
## 4. Intervention Effectiveness
## 5. Observation Layer Meta-Assessment
## 6. Data Speaks
## 7. Recommendations for Next L<N> Cycle
```

---

## Phase 3: Archive

**Purpose:** Persist the L(N) document and clear state.

### Entry

```
sbs_skill_transition(skill="introspect", to_phase="archive")
```

### Actions

1. Write L(N) document to `dev/storage/archive/meta-summaries/L<N>-<entry-id>.md`
2. Report summary to user:
   - Level produced
   - L(N-1) documents analyzed (count and IDs)
   - Date range covered
   - Key findings (2-3 sentence summary)
   - Output file path
3. Clear global state:
   ```
   sbs_skill_end(skill="introspect")
   ```

---

## Tool Inventory

### Archive Tools

| Tool | Use For |
|------|---------|
| `sbs_archive_state` | Check current global state |
| `sbs_skill_start` | Claim global state for ingestion |
| `sbs_skill_transition` | Move between phases |
| `sbs_skill_end` | Release global state |
| `sbs_skill_fail` | Record failure and release state |
| `sbs_search_entries` | Query entries for context |
| `sbs_epoch_summary` | Epoch-level statistics |

### Search Tools

| Tool | Use For |
|------|---------|
| `Glob` | Find L(N-1) documents by pattern |
| `Read` | Read each L(N-1) document |
| `Grep` | Search for specific patterns across documents |

### Issue Tools

| Tool | Use For |
|------|---------|
| `sbs_issue_list` | Check for related open issues |
| `sbs_issue_log` | Log bugs discovered during analysis |

---

## Recovery Semantics

### Compaction Survival

If context compacts mid-skill:

1. New context queries `sbs_archive_state()`
2. Reads current `global_state.substate`
3. Resumes from **start** of that substate

### Substate Resume Behavior

| Substate | Resume Action |
|----------|---------------|
| `ingestion` | Re-glob and re-read all L(N-1) documents from scratch |
| `synthesis` | Check if L(N) document already written. If yes, skip to archive. If no, re-synthesize. |
| `archive` | Re-read L(N) document, complete archival and state cleanup |

### State Conflict

If `global_state.skill != "introspect"`:
- Another skill owns the state
- Do NOT proceed
- Report error: "State conflict: skill '<other_skill>' currently owns global state"
- Wait for user resolution

---

## Error Handling

| Error | Response |
|-------|----------|
| N < 3 | Report: "Usage: `/introspect <N>` where N >= 3. Levels 1-2 are generated by `/update-and-archive` and `/self-improve`." |
| No L(N-1) documents found | `sbs_skill_fail(skill="introspect", reason="No L(N-1) documents found for level <N>")` |
| Only 1 L(N-1) document | `sbs_skill_fail(skill="introspect", reason="Insufficient data: need >= 2 L(N-1) documents, found 1")` |
| State conflict | Report and wait for user resolution (do not force) |
| Glob returns only `.gitkeep` | Treat as zero documents -- fail gracefully |

---

## Anti-Patterns

### Analysis Anti-Patterns

- **Parroting L(N-1) content**: Restating findings from lower levels adds no value. Each level must produce insights that require seeing multiple L(N-1) documents together.
- **Vague meta-observations**: "The system is improving" without specific evidence is noise. Cite document IDs and metrics.
- **Ignoring the Data Speaks section**: Narrative analysis is subjective. Raw tables ground the analysis in fact.
- **Scope creep into implementation**: `/introspect` analyzes and recommends. It does not create issues, modify code, or change guidance. Those are `/self-improve` and `/task` responsibilities.

### Structural Anti-Patterns

- **Skipping ingestion**: Reading 2 documents and declaring it sufficient when 5 exist. Read ALL L(N-1) documents.
- **Producing L(N) without minimum input**: The 2-document minimum exists because meta-analysis of a single document is just a restatement. Fail gracefully instead.
- **Mixing levels**: An L3 document must analyze L2 documents only, not reach back to L1 or raw archive entries. Each level trusts its inputs.
